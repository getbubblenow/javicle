#!/bin/bash
#
# Run JVCL on a spec
#
# Usage:
#
#    jvcl [-t temp-dir] [-n] spec-file
#
#  spec-file       : the JVCL to run. If omitted, read a spec from stdin
#
#  -t temp-dir     : where to write generated assets. If omitted, jvcl will
#                    create a new temporary directory
#
#  -n              : print commands that would have been run, but don't
#                    actually run anything
#
# Note: If the JVCL jar does not exist, it will be built from source.
# The first time you run it, it might take a long time to start up.
#
SCRIPT="${0}"
SCRIPT_DIR="$(cd "$(dirname "${SCRIPT}")" && pwd)"
JVCL_SKIP_ENV_VAR_HELP=1
. "${SCRIPT_DIR}"/jvcl_common

DEBUG=""
if [[ -n "${JVCL_DEBUG}" ]] ; then
  DEBUG="-agentlib:jdwp=transport=dt_socket,server=y,suspend=y,address=*:5005"
fi

java -cp "${JVCL_JAR}" ${DEBUG} jvcl.main.Jvcl "${@}"
